<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ú‡∏•‡∏¥‡∏ï (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ)</title>
    <style>
        /* CSS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö */
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding: 20px; background-color: #f4f7f6; }
        .container { max-width: 800px; margin: 0 auto; background-color: #fff; padding: 30px; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        h1 { color: #007bff; border-bottom: 2px solid #007bff; padding-bottom: 10px; margin-bottom: 20px; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: bold; color: #333; }
        input[type="date"], select, input[type="text"], input[type="number"], .data-list-input {
            width: 100%;
            padding: 12px;
            box-sizing: border-box;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 16px;
        }
        .input-inline { display: flex; gap: 10px; align-items: flex-end; }
        .input-inline > .form-group { flex: 1; }
        
        /* ‡∏õ‡∏∏‡πà‡∏°‡∏´‡∏•‡∏±‡∏Å */
        button {
            padding: 12px 20px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        button:hover { background-color: #218838; }
        .add-button { background-color: #ffc107; color: #333; }
        .add-button:hover { background-color: #e0a800; }
        .add-entry-btn-container { text-align: right; margin-top: 15px; }

        /* ‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏•‡πâ‡∏ß */
        #current-entries { border: 1px solid #ccc; padding: 15px; border-radius: 4px; margin-top: 20px; background-color: #f8f9fa; }
        #current-entries table { width: 100%; border-collapse: collapse; font-size: 14px; }
        #current-entries th, #current-entries td { border: 1px solid #ddd; padding: 8px; text-align: center; }
        #current-entries th:first-child, #current-entries td:first-child { text-align: left; }
        .remove-btn { background-color: #dc3545; padding: 5px 10px; font-size: 12px; }
        .remove-btn:hover { background-color: #c82333; }

        /* Modal */
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4); }
        .modal-content { background-color: #fefefe; margin: 10% auto; padding: 20px; border: 1px solid #888; width: 80%; max-width: 700px; border-radius: 8px; }
        .close-btn { color: #aaa; float: right; font-size: 28px; font-weight: bold; }
        .close-btn:hover, .close-btn:focus { color: #000; text-decoration: none; cursor: pointer; }

        /* ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏™‡∏£‡∏∏‡∏õ */
        .summary-table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        .summary-table th, .summary-table td { border: 1px solid #ddd; padding: 10px; text-align: right; }
        .summary-table th { background-color: #e9f5ff; text-align: center; }

        /* ‡∏õ‡∏∏‡πà‡∏°‡πÉ‡∏ô Modal */
        .modal-actions { display: flex; justify-content: flex-end; gap: 10px; margin-top: 15px; }
        .edit-btn-modal { background-color: #6c757d; }
        .edit-btn-modal:hover { background-color: #5a6268; }
    </style>
</head>
<body>

    <div class="container">
        <h1>üìä ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ú‡∏•‡∏¥‡∏ï</h1>
        <form id="productionForm">
            
            <div class="input-inline">
                <div class="form-group" style="flex: 2;">
                    <label for="production-date">üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:</label>
                    <input type="date" id="production-date" name="production-date" required>
                </div>
                <div class="form-group">
                    <label for="maker">üöó Maker:</label>
                    <select id="maker" name="maker" required onchange="updateLineOptions()">
                        <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Maker --</option>
                        <option value="Toyota">Toyota</option>
                        <option value="Nissan">Nissan</option>
                        <option value="Isuzu">Isuzu</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="line">üè≠ Line:</label>
                    <select id="line" name="line" required onchange="updateWHNoOptions()">
                        <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Line --</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="shift">üåô Shift:</label>
                    <select id="shift" name="shift" required>
                        <option value="A">A</option>
                        <option value="B">B</option>
                    </select>
                </div>
            </div>

            <hr>

            <h2>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ú‡∏•‡∏¥‡∏ï (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÑ‡∏î‡πâ)</h2>
            
            <div class="form-group">
                <label for="wh-no">üì¶ W/H NO.:</label>
                <div class="input-inline">
                    <input list="wh-no-list" id="wh-no" name="wh-no" class="data-list-input" placeholder="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤/‡πÄ‡∏û‡∏¥‡πà‡∏° W/H NO." required>
                    <datalist id="wh-no-list"></datalist>
                </div>
            </div>
            
            <div class="input-inline">
                <div class="form-group">
                    <label for="round1">‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà 1 (‡∏ä‡∏¥‡πâ‡∏ô):</label>
                    <input type="number" id="round1" name="round1" value="0" min="0">
                </div>
                <div class="form-group">
                    <label for="round2">‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà 2 (‡∏ä‡∏¥‡πâ‡∏ô):</label>
                    <input type="number" id="round2" name="round2" value="0" min="0">
                </div>
                <div class="form-group">
                    <label for="round3">‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà 3 (‡∏ä‡∏¥‡πâ‡∏ô):</label>
                    <input type="number" id="round3" name="round3" value="0" min="0">
                </div>
                <div class="form-group">
                    <label for="waiting">‡∏£‡∏≠‡∏™‡πà‡∏á (‡∏ä‡∏¥‡πâ‡∏ô):</label>
                    <input type="number" id="waiting" name="waiting" value="0" min="0">
                </div>
            </div>
            
            <div class="add-entry-btn-container">
                <button type="button" class="add-button" onclick="addEntry()">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (W/H NO. ‡∏ô‡∏µ‡πâ)</button>
            </div>

            <hr>

            <div id="current-entries">
                <p><strong>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ú‡∏•‡∏¥‡∏ï‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß:</strong></p>
                <table id="entries-table">
                    <thead>
                        <tr>
                            <th>W/H NO.</th>
                            <th>‡∏£‡∏≠‡∏ö 1</th>
                            <th>‡∏£‡∏≠‡∏ö 2</th>
                            <th>‡∏£‡∏≠‡∏ö 3</th>
                            <th>‡∏£‡∏≠‡∏™‡πà‡∏á</th>
                            <th>‡∏£‡∏ß‡∏°</th>
                            <th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                        </tr>
                    </thead>
                    <tbody>
                        </tbody>
                </table>
                <p id="no-entries-msg" style="text-align: center; color: #6c757d;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ú‡∏•‡∏¥‡∏ï‡∏ñ‡∏π‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°</p>
            </div>
            
            <div style="margin-top: 20px;">
                <button type="button" onclick="handleSubmit()">üíæ ‡∏™‡∏£‡∏∏‡∏õ‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
            </div>

        </form>
    </div>

    <div id="summaryModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <h2>‚úÖ ‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏ß‡∏°‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</h2>
            <div id="summaryContent">
                </div>
            <div class="modal-actions">
                <button onclick="editSubmission()" class="edit-btn-modal">‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
                <button onclick="confirmSubmission()" style="background-color: #007bff;">‚úîÔ∏è ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
            </div>
        </div>
    </div>

    <script>
        // --- ‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏±‡∏Å (‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏à‡∏≤‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏î‡∏¥‡∏°) ---
        const lineOptions = {
            Toyota: ["DT-1", "DT-2", "DT-3", "DT-4", "DT-5", "DT-6", "DT-8", "DT-9", "DT-10", "DT-11", "DT-13", "DT-16"],
            Nissan: ["DN-10", "DN-18"],
            Isuzu: ["DI-1", "DI-2", "DI-3", "DI-4", "DI-5", "DI-6"]
        };

        const dt16WHNo = [
            "8213C KK110 B00", "8213C KK150 B00", "8213C KK160 B00", "8213C KKF70 B00", "8213C KKF80 B00", 
            "8213C KKF80 B00 (KD)", "8213C KKG01 B00", "8213C KKG10 B00", "8213C KKG20 B00", 
            "8213C KKG20 B00 (KD)", "8213C KKG30 B00", "8213C KKG90 C00", "8213C KKZ10 A00", 
            "8213C KK280 B00", "8213C KK310 B00", "8213C KK601 B00", "8213C KK510 B00", 
            "8213C KK550 B00", "8213C KK620 B00", "8213C KK640 B00", "8213C KK650 B00", 
            "8213C KK870 B00", "8213C KKA00 B00", "8213C KKC40 B00", "8213C KKC90 B00", 
            "8213C KKD00 B00", "8213C KKD80 B00", "8213C KKY50 A00", "8213C KKX70 A00", 
            "8213C KKE30 B00", "8213C KKE40 B00", "8213D KK430 A00", "8213D KK460 A00", 
            "8213D KK590 A00", "8213D KK810 A00", "8213D KK730 C00", "8213D KKP90 C00", 
            "8213D KKT80 C00", "8213D KKX70 C00", "8213E KK750 C00"
        ];
        let customWHNo = ["EXAMPLE-001", "EXAMPLE-002"]; 
        let productionEntries = []; 
        let entryIdCounter = 0; 

        // --- DOM Elements ---
        const makerSelect = document.getElementById('maker');
        const lineSelect = document.getElementById('line');
        const whNoInput = document.getElementById('wh-no');
        const whNoList = document.getElementById('wh-no-list');
        const entriesTableBody = document.querySelector('#entries-table tbody');
        const noEntriesMsg = document.getElementById('no-entries-msg');

        // --- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏´‡∏•‡∏±‡∏Å (‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏¢‡πà‡∏≠‡∏¢) ---

        function updateLineOptions() {
            const selectedMaker = makerSelect.value;
            lineSelect.innerHTML = '<option value="">-- ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Line --</option>'; 
            
            if (selectedMaker && lineOptions[selectedMaker]) {
                lineOptions[selectedMaker].forEach(line => {
                    const option = document.createElement('option');
                    option.value = line;
                    option.textContent = line;
                    lineSelect.appendChild(option);
                });
            }
            updateWHNoOptions(); 
        }

        function updateWHNoOptions() {
            const selectedLine = lineSelect.value;
            whNoList.innerHTML = ''; 
            
            let whList = customWHNo; 
            
            if (selectedLine === 'DT-16') {
                whList = dt16WHNo;
            }

            whList.forEach(item => {
                const option = document.createElement('option');
                option.value = item;
                whNoList.appendChild(option);
            });

            const enteredWHNo = whNoInput.value.trim().toUpperCase();
            if (enteredWHNo && !whList.includes(enteredWHNo)) {
                if (selectedLine !== 'DT-16') {
                    if (!customWHNo.includes(enteredWHNo)) {
                        customWHNo.push(enteredWHNo);
                        const newOption = document.createElement('option');
                        newOption.value = enteredWHNo;
                        whNoList.appendChild(newOption);
                    }
                }
            }
        }

        function addEntry() {
            const whNo = whNoInput.value.trim().toUpperCase();
            const round1 = parseInt(document.getElementById('round1').value) || 0;
            const round2 = parseInt(document.getElementById('round2').value) || 0;
            const round3 = parseInt(document.getElementById('round3').value) || 0;
            const waiting = parseInt(document.getElementById('waiting').value) || 0;
            
            if (!document.getElementById('production-date').value || !makerSelect.value || !lineSelect.value || !whNo) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏±‡∏Å‡πÅ‡∏•‡∏∞ W/H NO. ‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô');
                return;
            }
            updateWHNoOptions(); 

            const newEntry = {
                id: entryIdCounter++,
                whNo: whNo,
                r1: round1,
                r2: round2,
                r3: round3,
                waiting: waiting,
                total: round1 + round2 + round3 + waiting
            };

            if (newEntry.total === 0) {
                 alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÉ‡∏ô‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà 1, 2, 3 ‡∏´‡∏£‡∏∑‡∏≠ ‡∏£‡∏≠‡∏™‡πà‡∏á ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏ä‡πà‡∏≠‡∏á');
                 return;
            }

            productionEntries.push(newEntry);
            renderEntriesTable();

            whNoInput.value = '';
            document.getElementById('round1').value = 0;
            document.getElementById('round2').value = 0;
            document.getElementById('round3').value = 0;
            document.getElementById('waiting').value = 0;
            whNoInput.focus(); 
        }

        function renderEntriesTable() {
            entriesTableBody.innerHTML = '';
            
            if (productionEntries.length === 0) {
                noEntriesMsg.style.display = 'block';
                return;
            }

            noEntriesMsg.style.display = 'none';

            productionEntries.forEach(entry => {
                const row = entriesTableBody.insertRow();
                row.id = `entry-row-${entry.id}`;
                row.innerHTML = `
                    <td>${entry.whNo}</td>
                    <td>${entry.r1}</td>
                    <td>${entry.r2}</td>
                    <td>${entry.r3}</td>
                    <td>${entry.waiting}</td>
                    <td><strong>${entry.total}</strong></td>
                    <td><button type="button" class="remove-btn" onclick="removeEntry(${entry.id})">‡∏•‡∏ö</button></td>
                `;
            });
        }
        
        function removeEntry(id) {
            productionEntries = productionEntries.filter(entry => entry.id !== id);
            renderEntriesTable();
        }

        function handleSubmit() {
            if (productionEntries.length === 0) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ú‡∏•‡∏¥‡∏ï‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Å‡πà‡∏≠‡∏ô‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•');
                return;
            }

            const mainData = {
                date: document.getElementById('production-date').value,
                maker: makerSelect.value,
                line: lineSelect.value,
                shift: document.getElementById('shift').value
            };
            
            for (const key in mainData) {
                if (!mainData[key]) {
                    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏±‡∏Å (‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà, Maker, Line, Shift) ‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô');
                    return;
                }
            }

            // --- ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏™‡∏£‡∏∏‡∏õ ---
            const summaryData = productionEntries.reduce((acc, entry) => {
                const key = entry.whNo;
                if (!acc[key]) {
                    acc[key] = { whNo: key, r1: 0, r2: 0, r3: 0, waiting: 0, total: 0 };
                }
                acc[key].r1 += entry.r1;
                acc[key].r2 += entry.r2;
                acc[key].r3 += entry.r3;
                acc[key].waiting += entry.waiting;
                acc[key].total += entry.total;
                return acc;
            }, {});

            let tableRows = '';
            Object.values(summaryData).forEach(item => {
                tableRows += `
                    <tr>
                        <td style="text-align: left; font-weight: bold;">${item.whNo}</td>
                        <td>${item.r1}</td>
                        <td>${item.r2}</td>
                        <td>${item.r3}</td>
                        <td>${item.waiting}</td>
                        <td><strong>${item.total}</strong></td>
                    </tr>
                `;
            });
            
            const summaryHTML = `
                <p><strong>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:</strong> ${mainData.date} | <strong>Maker:</strong> ${mainData.maker} | <strong>Line:</strong> ${mainData.line} | <strong>Shift:</strong> ${mainData.shift}</p>
                
                <p style="margin-top: 20px; font-weight: bold;">‡∏™‡∏£‡∏∏‡∏õ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏ß‡∏°‡∏ï‡∏≤‡∏° W/H NO.:</p>
                <table class="summary-table">
                    <thead>
                        <tr>
                            <th>W/H NO.</th>
                            <th>‡∏£‡∏≠‡∏ö 1 ‡∏£‡∏ß‡∏°</th>
                            <th>‡∏£‡∏≠‡∏ö 2 ‡∏£‡∏ß‡∏°</th>
                            <th>‡∏£‡∏≠‡∏ö 3 ‡∏£‡∏ß‡∏°</th>
                            <th>‡∏£‡∏≠‡∏™‡πà‡∏á ‡∏£‡∏ß‡∏°</th>
                            <th>‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${tableRows}
                    </tbody>
                </table>
                <p style="margin-top: 15px; color: #dc3545;">**‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏î‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</p>
            `;
            
            document.getElementById('summaryContent').innerHTML = summaryHTML;
            document.getElementById('summaryModal').style.display = 'block'; 
        }

        // --- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô Modal ‡πÉ‡∏´‡∏°‡πà ---
        function closeModal() {
            document.getElementById('summaryModal').style.display = 'none';
        }

        // üü¢ ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
        function editSubmission() {
            closeModal();
            // ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏±‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß (productionEntries) ‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
            alert('‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡πâ‡∏ß ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢');
        }

        function confirmSubmission() {
            const finalData = {
                main: {
                    date: document.getElementById('production-date').value,
                    maker: makerSelect.value,
                    line: lineSelect.value,
                    shift: document.getElementById('shift').value
                },
                entries: productionEntries
            };
            
            console.log('‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏à‡∏£‡∏¥‡∏á:', finalData);
            alert('‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß! ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏£‡∏±‡∏ö');
            
            // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏™‡πà‡∏á
            closeModal();
            document.getElementById('productionForm').reset(); 
            productionEntries = []; 
            renderEntriesTable();
            updateLineOptions(); 
        }

        // --- ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô ---
        document.addEventListener('DOMContentLoaded', () => {
            updateLineOptions();
            renderEntriesTable();
            document.getElementById('production-date').valueAsDate = new Date();
        });
    </script>
</body>
</html>
